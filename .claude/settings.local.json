{
  "permissions": {
    "allow": [
      "Bash(sort:*)",
      "Bash(for file in appointment-lifecycle appointments-atender-button payment-flow notifications flows)",
      "Bash(do echo \"=== $file.spec.ts ===\")",
      "Bash(PGPASSWORD='KMZvgHQAzeFdTg6O' psql:*)",
      "Bash(./apply-profile-migration.sh:*)",
      "Bash(npm run build:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nrefactor: complete VittaMed → VittaSami migration - Phase 2\n\nThis commit completes the rebranding migration from VittaMed to VittaSami:\n\n## Code Changes (src/)\n- Updated all authentication tokens: vittamed-auth-token → vittasami-auth-token\n- Updated JWT secrets and cookie names across all files\n- Updated API client headers: vittamed@1.0.0 → vittasami@1.0.0\n- Updated email templates and invitation URLs\n- Updated middleware configuration\n\nFiles modified:\n- src/lib/custom-auth.ts (JWT secret, cookie name)\n- src/lib/supabase.ts (client info headers)\n- src/lib/invitations.ts (login URL)\n- src/lib/notifications.ts (app URL, email templates)\n- src/middleware.ts (JWT secret, cookie name)\n- src/app/api/auth/login/route.ts (cookie name)\n- src/app/api/auth/logout/route.ts (cookie name)\n- src/app/api/users/[userId]/profile/route.ts (JWT secret, cookie name)\n- src/app/dashboard/[tenantId]/page.tsx (auth token)\n- src/app/admin/manage-users/page.tsx (auth token)\n- src/app/admin/settings/page.tsx (auth token)\n- src/app/admin/services/page.tsx (auth token)\n- src/app/my-appointments/page.tsx (auth token)\n- src/app/patients/page.tsx (auth token)\n- src/app/appointments/page.tsx (auth token)\n\n## Test Updates\n- Updated test assertions: \"VittaMed\" → \"VittaSami\"\n- Updated test email domains: @vittamed.com → @vittasami.com\n- ⚠️ Preserved demo passwords (VittaMed2024!) as requested\n\nFiles modified:\n- tests/authentication.spec.ts (4 test assertions)\n- tests/flows.spec.ts (test description + email domains)\n- tests/example.spec.ts (page title)\n\n## Infrastructure Updates\n- Docker Compose: vittamed-app → vittasami-app, vittamed-production → vittasami-production\n- Docker networks: vittamed-network → vittasami-network\n- Docker volumes: vittamed-data → vittasami-data\n- Nginx config: vittamed_app → vittasami_app upstream\n- Traefik labels: vittamed router → vittasami router\n\nFiles modified:\n- docker-compose.yml (service names, networks, volumes)\n- Dockerfile (header comment)\n- nginx.conf (upstream name, proxy pass)\n- .dockerignore (header comment)\n\n## Cleanup\n- Renamed VittaMed.MD → VittaMed.MD.legacy\n- Renamed vittamed-production backup → .legacy\n\n## Verification\n✅ Build successful (npm run build)\n✅ Zero VittaMed references remaining in code (excluding passwords)\n✅ All authentication flows updated\n✅ All Docker infrastructure aligned\n\n🤖 Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(cp:*)",
      "Bash(test:*)",
      "Bash(pgrep:*)",
      "Bash(cat:*)",
      "Bash(ls:*)",
      "Bash(git checkout:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: reestructuración enterprise - Fase 1 (Fundación + Componentes Core)\n\nImplementación de arquitectura de producción con separación de dominios,\nestrategia freemium y componentes enterprise-ready.\n\n## Arquitectura de Dominios\n- Configuración centralizada para vittasami.com y app.vittasami.lat\n- Route Groups: (marketing) para landing/pricing/invest\n- Middleware con lógica de subdominios y redirecciones automáticas\n\n## Configuración Centralizada\n- src/lib/config.ts: Dominios, rutas, helpers de routing\n- src/constants/pricing.ts: 4 planes (Free, Care $39, Pro $79, Enterprise $149)\n- src/constants/features.ts: Features, casos de uso, testimonios, stats\n\n## Design System\n- Heading: Sistema de tipografía con gradientes brand\n- Section: Containers responsive con spacing system\n- GradientText: Componente de textos con gradientes\n\n## Componentes de Marketing\n- PublicHeader: Nav moderna con sticky, backdrop blur, mobile menu animado\n- PublicFooter: Footer completo con 4 columnas, SEO optimizado\n\n## Componentes de Pricing\n- PricingCard: Cards con badges, features list, CTA\n- PricingToggle: Toggle mensual/anual con animación\n- FeatureComparison: Tabla comparativa completa\n- PricingFAQ: Accordion de FAQs con animaciones\n\n## Security & Production\n- Security headers: X-Frame-Options, CSP, X-Content-Type-Options\n- Middleware con manejo de subdominios\n- SEO metadata completo en layouts\n- TypeScript strict mode\n\n## Assets\n- Favicon actualizado: vittasami_logo.ico\n- Logo optimizado: vittasami_logo_alta_zoom.png\n\n## Build Status\n✅ Build de producción exitoso\n✅ 17 archivos nuevos\n✅ 3 archivos modificados\n✅ Todas las funcionalidades compilando correctamente\n\nPendiente Fase 2:\n- Componentes de inversores\n- Páginas completas (landing, pricing, invest)\n- API routes\n- Actualización de globals.css\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)"
    ],
    "deny": [],
    "ask": []
  }
}
